<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Absensi Karyawan</title>
    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"/>
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <style>
        body {
            text-align: center;
            padding-top: 40px;
        }
        #clock {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        .card-karyawan {
            margin-top: 30px;
        }
        input[type="text"] {
            font-size: 1.5rem;
            text-align: center;
        }
    </style>
</head>
<body class="bg-light text-dark">
     <div class="container">
        <h1 class="mb-4">Sistem Absensi RFID</h1>

        <div id="tanggal" class="text-secondary font-weight-medium h4 mb-2">
            <i class="bi bi-calendar3"></i> <span id="tanggal-text">--</span>
        </div>
        <div id="clock" class="h3">
            <i class="bi bi-clock"></i> <span id="clock-text">--:--:--</span>
        </div>
        
        <div class="form-group">
            <input type="text" autocomplete="off" maxlength="10" id="rfid-input" class="form-control" placeholder="Tempelkan Kartu RFID..." autofocus>
        </div>

        <!-- mencegah focus lost inputbox -->
        <script>
            const rfidInput = document.getElementById("rfid-input");

            // Set fokus saat halaman dibuka
            window.addEventListener("load", () => {
                rfidInput.focus();
            });

            // Cegah kehilangan fokus
            rfidInput.addEventListener("blur", () => {
                setTimeout(() => rfidInput.focus(), 10); // Delay kecil agar tidak konflik
            });

            // Cegah Tab berpindah elemen
            rfidInput.addEventListener("keydown", function(e) {
                if (e.key === "Tab") {
                e.preventDefault();
                }
            });
        </script>

        <div id="alert-absen"></div>

        <div class="card card-karyawan d-none" id="karyawan-info">
        <div class="card-body">
            <h5 class="card-title" id="karyawan-nama">Nama karyawan</h5>
            <p class="card-text"><span id="waktu-absen"></span></p>
            <!-- <img id="foto-pegawai" src="" alt="Foto Pegawai" class="img-thumbnail" width="150"> -->
        </div>
        </div>
    </div>

    <script>
        // Jam realtime
        function updateClock() {
            const now = new Date();

            // Tampilkan jam format am pm
            // document.getElementById("clock-text").textContent = now.toLocaleTimeString();

            // Tampilkan jam dengan format 24 jam
            const jamStr = now.toLocaleTimeString('id-ID', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false // <-- penting agar format 24 jam
            });
            document.getElementById("clock-text").textContent = jamStr;

            // Tampilkan tanggal
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const tanggalStr = now.toLocaleDateString('id-ID', options);
            document.getElementById("tanggal-text").textContent = tanggalStr;
            }

        setInterval(updateClock, 1000);
        updateClock();
    </script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    
    <!-- login.js diperlukan untuk menyimpan dan menggunakan token untuk akses api -->
    <script src="js/api/helper_jwt.js"></script>
    
    <!-- script utama -->
    <script src="js/api/main.js"></script>
</body>
</html>